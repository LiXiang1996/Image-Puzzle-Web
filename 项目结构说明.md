# 项目结构说明

## 📁 完整目录结构

```
vue-project/
├── public/                 # 静态资源目录
│   └── vite.svg           # 网站图标
├── src/                    # 源代码目录
│   ├── api/               # API 接口层
│   │   ├── auth.ts        # 认证相关接口（登录、注册、用户信息）
│   │   ├── works.ts       # 作品相关接口（CRUD）
│   │   ├── consumption.ts # 消费相关接口（历史记录、统计）
│   │   └── request.ts     # Axios 请求封装（拦截器、错误处理）
│   ├── assets/            # 静态资源（图片、字体等）
│   ├── components/        # 公共组件（可复用组件）
│   ├── layouts/           # 布局组件
│   │   └── UserLayout.vue # 用户中心布局（侧边栏导航）
│   ├── router/            # 路由配置
│   │   └── index.ts       # 路由定义、路由守卫
│   ├── stores/            # Pinia 状态管理
│   │   ├── user.ts        # 用户状态（登录、用户信息）
│   │   ├── works.ts       # 作品状态（作品列表、操作）
│   │   └── consumption.ts # 消费状态（消费记录、统计）
│   ├── styles/            # 全局样式
│   │   └── index.css      # 样式重置、全局样式
│   ├── types/             # TypeScript 类型定义
│   │   ├── user.ts        # 用户相关类型
│   │   ├── work.ts        # 作品相关类型
│   │   └── consumption.ts # 消费相关类型
│   ├── utils/             # 工具函数
│   │   └── index.ts       # 通用工具函数（日期格式化、防抖、节流等）
│   ├── views/             # 页面组件
│   │   ├── auth/          # 认证相关页面
│   │   │   ├── Login.vue  # 登录页面
│   │   │   └── Register.vue # 注册页面
│   │   ├── user/          # 用户相关页面
│   │   │   ├── Profile.vue      # 个人资料页面
│   │   │   ├── Consumption.vue  # 消费历史页面
│   │   │   ├── Works.vue        # 我的作品页面
│   │   │   └── Create.vue       # 创作中心页面（文生图）
│   │   ├── Home.vue       # 首页
│   │   └── NotFound.vue   # 404 页面
│   ├── App.vue            # 根组件
│   ├── main.ts            # 应用入口文件
│   └── vite-env.d.ts      # Vite 环境变量类型定义
├── .gitignore             # Git 忽略文件
├── eslint.config.mjs      # ESLint 配置
├── .prettierrc            # Prettier 配置
├── index.html             # HTML 入口文件
├── package.json           # 项目依赖和脚本
├── README.md              # 项目说明文档
├── 技术选型说明.md        # 技术选型详细说明
├── 项目结构说明.md        # 本文件
├── tsconfig.json          # TypeScript 配置
├── tsconfig.node.json     # Node.js TypeScript 配置
└── vite.config.ts         # Vite 构建配置
```

## 📋 各目录详细说明

### 1. `/src/api/` - API 接口层

**职责**：封装所有与后端 API 的交互

- `request.ts`：Axios 实例配置
  - 请求/响应拦截器
  - Token 自动添加
  - 错误统一处理
  - 401 自动跳转登录

- `auth.ts`：认证相关接口
  - `login()` - 用户登录
  - `register()` - 用户注册
  - `getUserInfo()` - 获取用户信息
  - `logout()` - 退出登录

- `works.ts`：作品相关接口
  - `getWorks()` - 获取作品列表
  - `getWorkById()` - 获取单个作品
  - `createWork()` - 创建作品
  - `updateWork()` - 更新作品
  - `deleteWork()` - 删除作品

- `consumption.ts`：消费相关接口
  - `getConsumptionHistory()` - 获取消费历史
  - `getConsumptionStats()` - 获取消费统计

### 2. `/src/stores/` - 状态管理

**职责**：使用 Pinia 管理全局状态

- `user.ts`：用户状态
  - `token` - 认证令牌
  - `userInfo` - 用户信息
  - `isAuthenticated` - 是否已登录
  - `userLogin()` - 登录方法
  - `userRegister()` - 注册方法
  - `userLogout()` - 退出登录
  - `fetchUserInfo()` - 获取用户信息
  - `initUserInfo()` - 从本地存储初始化

- `works.ts`：作品状态
  - `works` - 作品列表
  - `loading` - 加载状态
  - `fetchWorks()` - 获取作品列表
  - `addWork()` - 添加作品
  - `removeWork()` - 删除作品

- `consumption.ts`：消费状态
  - `records` - 消费记录列表
  - `loading` - 加载状态
  - `total` - 总记录数
  - `fetchConsumptionHistory()` - 获取消费历史

### 3. `/src/router/` - 路由配置

**职责**：定义应用的路由和导航

- `index.ts`：路由配置
  - 路由定义
  - 路由守卫（权限控制）
  - 页面标题设置
  - 未登录自动跳转

**路由列表**：
- `/` - 首页（重定向到 `/home`）
- `/login` - 登录页
- `/register` - 注册页
- `/home` - 首页
- `/user/profile` - 个人资料（需要登录）
- `/user/consumption` - 消费历史（需要登录）
- `/user/works` - 我的作品（需要登录）
- `/user/create` - 创作中心（需要登录）
- `/*` - 404 页面

### 4. `/src/views/` - 页面组件

**职责**：应用的主要页面视图

#### 认证页面 (`/src/views/auth/`)
- `Login.vue`：登录页面
  - 用户名/密码登录
  - 表单验证
  - 登录状态管理

- `Register.vue`：注册页面
  - 用户注册表单
  - 邮箱验证
  - 密码确认

#### 用户页面 (`/src/views/user/`)
- `Profile.vue`：个人资料
  - 用户信息展示
  - 信息编辑
  - 头像上传

- `Consumption.vue`：消费历史
  - 消费记录列表
  - 分页功能
  - 筛选和排序

- `Works.vue`：我的作品
  - 作品列表展示（网格布局）
  - 作品查看
  - 作品删除

- `Create.vue`：创作中心
  - 文生图表单
  - 提示词输入
  - 参数配置
  - 图片生成

#### 其他页面
- `Home.vue`：首页
- `NotFound.vue`：404 页面

### 5. `/src/layouts/` - 布局组件

**职责**：定义页面的整体布局结构

- `UserLayout.vue`：用户中心布局
  - 侧边栏导航
  - 顶部导航栏
  - 主内容区域
  - 用户信息展示
  - 退出登录功能

### 6. `/src/types/` - 类型定义

**职责**：定义 TypeScript 类型，确保类型安全

- `user.ts`：用户相关类型
  - `UserInfo` - 用户信息接口
  - `UserProfile` - 用户资料接口

- `work.ts`：作品相关类型
  - `Work` - 作品接口
  - 包含图片、提示词、参数等

- `consumption.ts`：消费相关类型
  - `ConsumptionRecord` - 消费记录接口

### 7. `/src/utils/` - 工具函数

**职责**：提供通用的工具函数

- `index.ts`：工具函数集合
  - `formatDate()` - 日期格式化
  - `debounce()` - 防抖函数
  - `throttle()` - 节流函数
  - `deepClone()` - 深拷贝

### 8. `/src/styles/` - 全局样式

**职责**：定义全局样式和样式重置

- `index.css`：全局样式
  - CSS 重置
  - 全局字体设置
  - 滚动条样式
  - 基础样式定义

### 9. `/src/components/` - 公共组件

**职责**：可复用的 Vue 组件

> 目前为空，后续可以添加：
> - `Loading.vue` - 加载组件
> - `Empty.vue` - 空状态组件
> - `ImageUpload.vue` - 图片上传组件
> - `Pagination.vue` - 分页组件

## 🔄 数据流向

```
用户操作
  ↓
页面组件 (Views)
  ↓
状态管理 (Stores) ← → API 接口 (API)
  ↓                    ↓
后端服务器
```

## 📝 开发规范

### 文件命名
- **组件文件**：PascalCase（如 `UserProfile.vue`）
- **工具文件**：kebab-case（如 `format-date.ts`）
- **类型文件**：kebab-case（如 `user-info.ts`）

### 代码组织
- **单一职责**：每个文件只负责一个功能
- **关注点分离**：API、状态、视图分离
- **可复用性**：公共逻辑提取到工具函数或组件

### 类型安全
- 所有 API 接口都有类型定义
- 组件 Props 和 Emits 都有类型
- 状态管理使用 TypeScript

## 🚀 下一步开发建议

1. **完善组件**：在 `components/` 目录添加公共组件
2. **API 对接**：根据实际后端 API 调整接口
3. **功能实现**：实现各个页面的具体功能
4. **错误处理**：完善错误处理和用户提示
5. **性能优化**：添加懒加载、虚拟滚动等优化
6. **测试**：添加单元测试和 E2E 测试

---

**文档更新时间**：2025-11-19

